---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - kuma.yaml # Point to the file generated by `kumactl install control-plane`
patchesJson6902:
  - path: remove-cabundle-patch-mutating.json
    target:
      group: admissionregistration.k8s.io
      kind: MutatingWebhookConfiguration
      name: kuma-admission-mutating-webhook-configuration
      version: v1
  - path: remove-cabundle-patch-validating.json
    target:
      group: admissionregistration.k8s.io
      kind: ValidatingWebhookConfiguration
      name: kuma-validating-webhook-configuration
      version: v1
  - path: change-injector-ca-file-patch.json
    target:
      group: apps
      kind: Deployment
      name: kuma-control-plane
      version: v1
  - path: add-ca-mount-patch.json
    target:
      group: apps
      kind: Deployment
      name: kuma-control-plane
      version: v1
  - path: add-webhook-annotation-patch.json
    target:
      group: admissionregistration.k8s.io
      kind: MutatingWebhookConfiguration
      name: kuma-admission-mutating-webhook-configuration
      version: v1
  - path: add-webhook-annotation-patch.json
    target:
      group: admissionregistration.k8s.io
      kind: ValidatingWebhookConfiguration
      name: kuma-validating-webhook-configuration
      version: v1
